<!DOCTYPE html>
<html lang="en-US" oncontextmenu="return false">

<head>
    <title>DPL37 Best Time to Buy and Sell Stock III</title>
    <link rel="icon" type="image/x-icon" href="../photo.jpg" />

    <link rel="stylesheet" id="wp-block-library-css"
        href="https://www.lexalytics.com/wp-includes/css/dist/block-library/style.min.css?ver=6.0.3" type="text/css"
        media="all" />
    <style id="global-styles-inline-css" type="text/css"></style>

    <link rel="stylesheet" id="wd_s-css"
        href="https://www.lexalytics.com/wp-content/themes/wd_s/build/index.css?ver=0c4cbca560ded1aeeb10beb9a609f609"
        type="text/css" media="all" />

    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="../style.css" />
</head>

<body
    class="page-template-default page page-id-2597 page-child parent-pageid-2342 wp-embed-responsive site-wrapper page-machine-learning group-blog no-js">
    <a class="skip-link screen-reader-text" href="#main">Skip to content</a>

    <div class="site-main">
        <main id="main" class="content-container">
            <article id="post-2597" class="post-2597 page type-page status-publish hentry">
                <div class="entry-content">
                    <div id="section-block_627ed6b337646" class="block-section relative overflow-hidden 0">
                        <div class="bg-white py-100 bg-cover centerbg- bg-no-repeat CodeStartingDiv">
                            <div class="CodeStartingDiv">

                                <div class="companyLogo">
                                    <img class="companyLogo1"
                                        src="https://1000logos.net/wp-content/uploads/2021/10/logo-Meta.png" alt>
                                    <img class="companyLogo2"
                                        src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Amazon_icon.svg/2500px-Amazon_icon.svg.png"
                                        alt>
                                    <img class="companyLogo3"
                                        src="https://cdn.freebiesupply.com/images/large/2x/apple-logo-transparent.png"
                                        alt>
                                    <img class="companyLogo4"
                                        src="https://cdn-icons-png.flaticon.com/512/732/732228.png" alt>
                                    <img class="companyLogo5"
                                        src="https://cdn1.iconfinder.com/data/icons/google-s-logo/150/Google_Icons-09-512.png"
                                        alt>

                                </div>

                                <h5 class="has-text-align-center">
                                    <mark style="background-color: rgba(0, 0, 0, 0)"
                                        class="has-inline-color has-nebula-color">
                                        Jb Tak Fodega Nhi 🎯 Tb Tk Chodega
                                        Nhi 📚 (MAANG)
                                    </mark>

                                    <br><br>

                                    <div class="dsa">
                                        <div class="dsaProfile"><a href="https://leetcode.com/PrinceSingh1/"><img
                                                    src="../dsaProfileImg/lc.png" alt></a></div>
                                        <div class="dsaProfile"><a href="https://leetcode.com/PrinceSingh2/"><img
                                                    src="../dsaProfileImg/lc.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://auth.geeksforgeeks.org/user/itsprince/practice"><img
                                                    src="../dsaProfileImg/gfg.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://www.codingninjas.com/codestudio/profile/b7191958-3dea-4d59-a909-70a6bd5400c8"><img
                                                    src="../dsaProfileImg/cn.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://www.interviewbit.com/profile/princesingh2002"><img
                                                    src="../dsaProfileImg/ib.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://www.hackerrank.com/dsawithprince?hr_r=1"><img
                                                    src="../dsaProfileImg/hr.png" alt></a></div>
                                        <div class="dsaProfile"><a href="https://www.hackerearth.com/@prince1033"><img
                                                    src="../dsaProfileImg/he.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://www.codechef.com/users/princesingh001"><img
                                                    src="../dsaProfileImg/cc.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://codeforces.com/profile/thisisPrinceSingh"><img
                                                    src="../dsaProfileImg/cf.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://workat.tech/profile/itsprincesingh"><img
                                                    src="../dsaProfileImg/wk.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://www.linkedin.com/in/prince-singh-314a65187/"><img
                                                    src="../dsaProfileImg/lin.png" alt></a></div>
                                        <div class="dsaProfile"><a href="https://github.com/PrinceSinghhub"><img
                                                    src="../dsaProfileImg/gh.png" alt></a></div>
                                        <div class="dsaProfile"><a href="https://twitter.com/NowPrinceSingh"><img
                                                    src="../dsaProfileImg/tw.png" alt></a></div>
                                        <div class="dsaProfile"><a
                                                href="https://stackoverflow.com/users/16512708/prince-singh"><img
                                                    src="../dsaProfileImg/st.png" alt></a></div>
                                        <div class="dsaProfile"><a href="https://topmate.io/itsprincesingh"><img
                                                    src="../dsaProfileImg/topm.png" alt></a></div>
                                        <div class="dsaProfile"><a href="https://hashnode.com/@itsPrinceSingh"><img
                                                    src="../dsaProfileImg/hn.png" alt></a></div>
                                    </div>
                                </h5>

                                <h1 class="has-text-align-center mb-60">
                                    DPL37 Best Time to Buy and Sell Stock III
                                </h1>

                                <div class="allBTNGroups">
                                    <button class="hardQst" role="button">😢 Hard</button>
                                    <!-- <button class="mediumQst" role="button">😟
                                        Medium</button> -->
                                    <!-- <button class="easyQst" role="button">😊 Easy</button>
                    
                    <button class="hardQst" role="button">😢 Hard</button> -->
                                    <a href><button class="leetcodelink" role="button">
                                            <div class="imgQstDiv">
                                                <img src="../dsaProfileImg/leetcode.webp" alt>LeetCode
                                            </div>
                                        </button></a>
                                    <a href><button class="gfgQstlink" role="button">
                                            <div class="imgQstDiv">
                                                <img src="../dsaProfileImg/geeksforgeeks.png" alt>GeeksForGeeks
                                            </div>
                                        </button></a>
                                    <a href><button class="codslink" role="button">
                                            <div class="imgQstDiv">
                                                <img src="../dsaProfileImg/codeStudio.png" alt>CodeStudio
                                            </div>
                                        </button></a>
                                </div>

                                <!-- Problem Statements  -->

                                <p>
                                    We are given an array Arr[] of length n. It represents the price of a stock on ‘n’
                                    days. The following guidelines need to be followed:

                                    <br>

                                    <li>We can buy and sell the stock any number of times.</li>
                                    <li>In order to sell the stock, we need to first buy it on the same or any previous
                                        day.</li>
                                    <li>We can’t buy a stock again after buying it once. In other words, we first buy a
                                        stock and then sell it. After selling we can buy and sell again. But we can’t
                                        sell before buying and can’t buy before selling any previously bought stock.
                                    </li>
                                    <li>We can do at most <b>2 Transactions</b>.</li>

                                    <br>
                                    <img src="./Notes/L36expImg2.jpg" alt="">
                                    <br>

                                    <b>Find and return the maximum profit you can achieve.</b> <br>
                                    <img src="./Notes/L36expImg1.jpg" alt="">

                                </p>

                                <h4 style="color: red;">Only Few Updates in this Question As Compared to the Last, DPL36
                                    Best Time to Buy and Sell Stock II</h4>

                                <p>
                                    <li><b>In Best Time to Buy and Sell Stock I: We Allow Just Only 1 Transactions</b>
                                    </li>
                                    <li><b>In Best Time to Buy and Sell Stock II: We Allow Infinite Transactions</b>
                                    </li>
                                    <li><b>In Best Time to Buy and Sell Stock III: We Allow Just Only 2 Transactions</b>
                                    </li> <br>
                                </p>

                                <p>
                                    <b>In Best Time to Buy and Sell Stock III We Allow Just Only 2 Transactions</b> Thsi
                                    Probelms Give a Reminder of the <b>Knapsack Probelm</b> that we all ready Done. <br>

                                    This Problem is the Application Varient of the Best Time to Buy and Sell Stock II,
                                    Just Only Modified the SOme Line of the Code

                                    <br><br>

                                    <img src="./Notes/L37expImg1.jpg" alt="">
                                </p>

                                <p>
                                    <li>Add the <b>Cap</b> Variable in the Recursion, Memoization, tabluation and Space
                                        Optimization that Show the Limit of the 2</li>
                                    <li>Just onlt Add the <b>Cap Variable</b> in the All the Code in <b>Best Time to Buy
                                            and Sell Stock II</b> that is the Only Single Change and Entire Logic and
                                        Code will be Same as we Done in Best Time to Buy and Sell Stock II</li>
                                </p>

                                <p>
                                    In <b>Recursice Approch</b> We Just Add the <b>Cap Variable</b> in the Recursion,
                                    Memoization, tabluation and Space Optimization that Show the Limit of the 2, and
                                    Modified Entire Solution on the Base of the <b>Cap Variable</b>

                                    <br><br>
                                    <img src="./Notes/L37expImg2.jpg" alt=""> <br>

                                    <b>Now Here is the Question Why we:-</b>
                                    <li>Option1: Not Change the Cap Value</li>
                                    <li>Option2: We Changed the Cap Value</li> <br>


                                    the <b>Answe is</b> Any transaction Whern Counted Completed, When we Buy and Sell
                                    the Stock <b>And Gain Some Profit</b>, So we Need to Change the Cap Value, and When
                                    we Not Buy and Sell the Stock, So we Not Need to Change the Cap Value. <b>Buy Stock
                                        + Shell Stock = Count 1 Transaction</b> <br><br>

                                    <li>This is the Suffel Change Required in the Previous Code, and Everything will be
                                        Same Just use the Cap Variable and Modified all the Soltuions</li>
                                </p>


                                <b>
                                    <h5>Now Remaining Entire 👇 Process will Be Same As Like in DPL36</h5>
                                </b>
                                <p>
                                    Every day, we will have two choices, either to do nothing and move to the next day
                                    or to buy/sell (based on the last transaction) and find out the profit. Therefore we
                                    need to generate all the choices in order to compare the profit. As we need to try
                                    out all the possible choices, we will use <b>recursion</b>.
                                </p>

                                <br>
                                <h3>Recursice Approch</h3>

                                <p><b>Again here we follow the out Standerad Patter that we learned in the Dynamic
                                        Programming Introduction. How to Write Recursion</b></p>

                                <b>Steps to form the Recursive Solution</b>
                                <br>

                                <b>Step 1: Express the problem in terms of
                                    indexes.</b><br>

                                <li>
                                    We need to think in the terms of the number of days, therefore one variable will be
                                    the array index( say ind). Next, we need to respect the condition that we can’t buy
                                    a stock again, that is we need to first sell a stock, and then we can buy that
                                    again. Therefore we need a second variable ‘buy’ which tells us on a particular day
                                    whether we can buy or sell the stock. Next, we have a cap on the number of
                                    transactions that we can make. Here the initial cap is 2. We need to always keep in
                                    mind this constraint.

                                    <img src="./Notes/L36resImg1.jpg" alt=""> <br>

                                    <b>Step 2: Try out all possible choices at a
                                        given index.</b> <br>

                                    <p>Every day, we have two choices

                                <li>To either buy/sell the stock(based on the buy variable’s value and if ‘cap’ > 0).
                                </li>
                                <li>To do nothing and move on to the next day.</li>

                                <b>If We Carefully Observed then we see this Probelem Base on the pick/notPick concept
                                    that we do in the our Entire dp Playlist.</b>

                                </p>

                                <b>Case 1: When buy == 0, we can buy the stock.</b> <br>
                                <p>If we can buy the stock on a particular day, we have two options</p>

                                <li><b>Option 1:</b> To do no transaction and move to the next day. In this case, the
                                    net profit earned will be 0 from the current transaction, and to calculate the
                                    maximum profit starting from the next day, we will recursively call f(ind+1,0). As
                                    we have not bought the stock, the ‘buy’ variable value will still remain 0,
                                    indicating that we can buy the stock the next day. And the ‘cap’ variable will
                                    remain the same as if no transaction took place. <b>(notTake)</b></li> <br>

                                <li>
                                    <b>Option 2:</b> The other option is to buy the stock on the current day. In this
                                    case, the net profit earned from the current transaction will be <b>-Arr[i]</b>. As
                                    we are buying the stock, we are giving money out of our pocket, therefore the profit
                                    we earn <b>is negative</b>. To calculate the maximum profit starting from the next
                                    day, we will recursively call f(ind+1,1). As we have bought the stock, the ‘buy’
                                    variable value will change to 1, indicating that we can’t buy and only sell the
                                    stock the next day. As we have only bought the stock and not sold it the transaction
                                    remains incomplete and the ‘cap’ variable value remains unchanged.<b>(Take)</b>
                                </li> <br>

                                <b>Case 2: When buy == 1, we can sell the stock.</b>
                                <p>Agin we have If we can buy the stock on a particular day, we have two options</p>


                                <li><b>Option 1:</b> To do no transaction and move to the next day. In this case, the
                                    net profit earned will be 0 from the current transaction, and to calculate the
                                    maximum profit starting from the next day, we will recursively call f(ind+1,1). As
                                    we have not bought the stock, the ‘buy’ variable value will still remain at 1,
                                    indicating that we can’t buy and only sell the stock the next day. And the ‘cap’
                                    variable will remain the same as if no transaction took place.<b>notTake</b></li>
                                <br>

                                <li><b>Option 2:</b> The other option is to sell the stock on the current day. In this
                                    case, the net profit earned from the current transaction will be <b> +Arr[i]</b>. As
                                    we are selling the stock, we are putting the money into our pocket, therefore the
                                    profit we earn <b>is positive</b>. To calculate the maximum profit starting from the
                                    next day, we will recursively call f(ind+1,0). As we have sold the stock, the ‘buy’
                                    variable value will change to 0, indicating that we can buy the stock the next day.
                                    As we have sold the earlier bought stock, we make one complete transaction,
                                    therefore now we update the <b>‘cap’ variable’s value to cap-1</b>.<b>Take</b></li>
                                <br>


                                <b>The figure below gives us the Summary</b>
                                <img src="./Notes/L36resImg2.jpg" alt=""> <br>
                                <img src="./Notes/L36resImg3.jpg" alt=""> <br>

                                <b>Step 3: Return the Maximum</b> <br>

                                <li>As we are looking to maximize the profit earned, we will return the maximum value in
                                    both cases. The final pseudocode after steps 1, 2, and 3
                                </li> <br>

                                <img src="./Notes/L37expImg2.jpg" alt=""> <br>
                                <b>Base Cases</b>

                                <li>
                                    If ind==n, it means we have finished trading on all days, and there is no more money
                                    that we can get, therefore we simply return 0. <b>("Does.t Matter if we Have Some
                                        Stocks are Remaing not at the End Profit will we 0")</b>
                                </li>

                                <li>If cap==0, it means that we cannot make any more transactions. Therefore we return
                                    0.</li>

                                <br><br>


                                <div class="container">
                                    <div class="item">
                                        <div class="title"><b>Recursion
                                                Python Code</b></div>
                                       <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def RecursionApproch</span>(<span class="code-class-name">self</span>, prices,index,n,decisionFlag,transactionLimit):
        
        <span class="comment-code"># Base Case</span>    
        <span class="code-reserved-word">if</span> index == n <span class="code-reserved-word">or</span> transactionLimit == 0:
            <span class="code-reserved-word">return</span> 0
                
        <span class="code-remain-code">maxProfit = 0</span>
                
        <span class="code-reserved-word">if</span> decisionFlag == 1:
        <span class="code-remain-code"><span class="comment-code">    # as similar to take and notTake Concepts</span>
            buyTheStock = -prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices,index+1,n,0,transactionLimit)
            notBuyTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices,index+1,n,1,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)</span>
           
        <span class="code-reserved-word">else:</span>
        <span class="code-remain-code">    shellTheStock = prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices, index + 1, n, 1,transactionLimit-1)
            notSellTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices, index + 1, n, 0,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                    </span>
        <span class="code-reserved-word">return</span> maxProfit

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-remain-code">decisionFlag = 1
        transactionLimit = 2
        </span>
        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices,0,n,decisionFlag,transactionLimit)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>
                                
                                </div>
                                <br>

                                <h3>Time & Space Complexity</h3>
                                <b>Time Complexity: O(2^N)</b> <br>

                                Reason: Exponential Time we find out the all
                                the Possible Path<br>

                                <b>Space Complexity: O(N)</b> <br>

                                Reason: We are using a recursion stack
                                space(O(N))<br><br>

                                <h3>Memoization Approch</h3>

                                <p>
                                    If we Observe in the recursion tree, we
                                    will observe a many number of
                                    overlapping subproblems.
                                    Therefore the recursive solution can be
                                    memoized for to reduce the time
                                    complexity.
                                </p>

                                <b>Steps to convert Recursive code to
                                    memoization solution:</b> <br><br>

                                <li>The Twist in the <b>Memoization</b> we Used a <b>3D DP</b> fro thsi Probelem where
                                    <b>dp[n][2][3]</b> <br>
                                    Where:-
                                    <br>
                                    n:- Size of the Input Array <br>
                                    2:- Dession Flag <br>
                                    3:- Cap Flag or Transaction Limit
                                </li> <br>

                                <li>Create a dp array of size [n][2][3]. The size of the input array is ‘n’, so the
                                    index will always lie between ‘0’ and ‘n-1’. The ‘buy’ variable can take only two
                                    values: 0 and 1 and the ‘cap’ variable can only take three variables 0, 1, and 2.
                                    Therefore we take the dp array as dp[n][2][3].</li>
                                <br>
                                <li>We initialize the dp array to -1.</li>
                                <br>
                                <li>Whenever we want to find the answer of particular parameters (say f(ind,buy,cap)),
                                    we first check whether the answer is already calculated using the dp array(i.e
                                    dp[ind][buy][cap]!= -1 ). If yes, simply return the value from the dp array.</li>
                                <br>
                                <li>If not, then we are finding the answer for the given value for the first time, we
                                    will use the recursive relation as usual but before returning from the function, we
                                    will set dp[ind][buy][cap] to the solution we get.</li>
                                <br>

                                <div class="container">
                                    <div class="item">
                                        <div class="title"><b>Memoization
                                                Python Code</b></div>
                                           <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def MemoizationApproch</span>(<span class="code-class-name">self</span>, prices,index,n,decisionFlag,dp,transactionLimit):

        <span class="comment-code"># Base Case</span>
        <span class="code-reserved-word">if</span> index == n <span class="code-reserved-word">or</span> transactionLimit == 0:
            <span class="code-reserved-word">return</span> 0
                
        <span class="code-remain-code"><span class="code-reserved-word">if</span> dp[index][decisionFlag][transactionLimit] != -1:
            <span class="code-reserved-word">return</span> dp[index][decisionFlag][transactionLimit]</span>

        <span class="code-remain-code">maxProfit = 0</span>
                
        <span class="code-reserved-word">if</span> decisionFlag == 1:
        <span class="code-remain-code"><span class="comment-code">    # as similar to take and notTake Concepts</span>
            buyTheStock = -prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices,index+1,n,0,dp,transactionLimit)
            notBuyTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices,index+1,n,1,dp,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)</span>
           
        <span class="code-reserved-word">else:</span>
        <span class="code-remain-code">    shellTheStock = prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices, index + 1, n, 1,dp,transactionLimit-1)
            notSellTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices, index + 1, n, 0,dp,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                    </span>
        <span class="code-remain-code">dp[index][decisionFlag][transactionLimit] = maxProfit</span>
        <span class="comment-code"># we can also return maxProfit its also give the correct answer</span>
        <span class="code-reserved-word">return</span> dp[index][decisionFlag][transactionLimit]

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-remain-code">decisionFlag = 1
        transactionLimit = 2
        </span>
        <span class="code-remain-code">dp = [[[-1 <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(transactionLimit+1)] <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2)] <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n)]</span>
   
        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices,0,n,decisionFlag,dp,transactionLimit)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <br>

                                <h3>Time & Space Complexity</h3>

                                <b>Time Complexity:O(N*2*3)</b> <br>

                                Reason: There are N*2*3 states therefore at max ‘N*2*3’ new problems will be solved<br>

                                <b>Space Complexity: O(N*2*3) + O(N)</b> <br>

                                Reason: We are using a recursion stack space(O(N)) and a 3D array ( O(N*2*3)).<br><br>

                                <h3>Tabulation Approch</h3>

                                Tabulation is a <b>‘bottom-up’</b> approach
                                where we start from the base case and reach
                                the final answer
                                that we want and Memoization is the <b>Top-down</b>
                                Approch.
                                <br>
                                <p>
                                    In Tabulation Approch We Just Creat a DP
                                    Array Same as Memoization and Simply
                                    Convert the <b>Recurance
                                        Relation into the form of the
                                        Looping</b>
                                </p>

                                <b>VVVV Important Point: Tabulation Approch
                                    is Always 1-Based Indexing Always
                                    Remember</b> <br><br>

                                <b>Steps to convert Recursive Solution to
                                    Tabulation one.</b><br>


                                <li>To convert the memoization approach to a
                                    tabulation one, create a dp array with
                                    the same size as
                                    done in memoization. We can initialize
                                    it as 0. (size [N+1][2][3])</li>
                                <br>

                                <li><b>Handling the base Case</b> Now, what the base condition in the recursive relation
                                    is</li> <br>

                                <li><b>if( ind == n || cap == 0) return 0</b> We handle this in the following way</li>
                                <br>

                                <li><b>ind == n</b> When ind == n, the other two variables: cap and buy can take any
                                    value, therefore we can set the following two loops and set dp[n][buy][cap] = 0</li>
                                <br>

                                <img src="./Notes/L37tabImg1.jpg" alt=""> <br>

                                <li><b>cap == 0</b> When cap == 0, the other two variables: ind and cap can take any
                                    value, therefore we can set the following two loops and set dp[ind][buy][0] = 0.
                                </li> <br>

                                <img src="./Notes/L37tabImg2.jpg" alt=""> <br>

                                <li>Another hack is to initialize the entire 3D DP Array as 0. In this case, we need not
                                    worry about explicitly setting the base cases.</li> <br>

                                <li>First, we declare the dp array of size [n+1][2][3] as zero.</li> <br>
                                <li>As we have initialized the array as 0, we have automatically set the base condition
                                    as explained above.</li> <br>
                                <li>Now, traverse the array in the opposite direction of that of the memoization
                                    technique. We will start from ind = n-1 -> ind =0.</li> <br>
                                <li>In every iteration copy the recursive code logic.</li> <br>
                                <li>At last dp[0][0][2] ( maximum profit generated on ith day, when we can buy the stock
                                    on 0th day and can have a total 2 transactions) gives us the final answer.</li>

                                <br>

                                <b>VVVVVVV Imp Point</b>
                                <li><b>We All Ready Inilisezed the Our Entire DP array with 0, No Need to write the base
                                        case all ready all zero but we write the base case for the understanding the
                                        Tabulation Approch</b></li> <br>

                                <div class="container">
                                    <div class="item">
                                        <div class="title"><b>Tabulation
                                                Python Code</b></div>
                                        <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def TabulationApproch</span>(<span class="code-class-name">self</span>, prices,n,dp):
        
        <span class="comment-code"># Base Case
        # if index == n
        </span>
        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2):
            <span class="code-reserved-word">for</span> currdecisionFlag <span class="code-class-name">in</span> <span class="code-function-name">range</span>(3):
                <span class="code-remain-code">dp[0][index][currdecisionFlag] = 0</span>


        <span class="comment-code"># if transactionLimit == 0</span>
        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n):
            <span class="code-reserved-word">for</span> currdecisionFlag <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2):
                <span class="code-remain-code">dp[index][currdecisionFlag][0] = 0</span>

        <span class="code-reserved-word">print</span>(dp)

        <span class="comment-code"># Important Note: We All Ready in our DP inilisezed with the 0, no need to write the Base
        # Case allready all 0, But we Write the Base Case for the Understanding the Tabulation</span>

        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n-1,-1,-1):
            <span class="code-reserved-word">for</span> decisionFlag <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2):
                <span class="code-reserved-word">for</span> transactionLimit <span class="code-class-name">in</span> <span class="code-function-name">range</span>(1,3):

                    <span class="code-remain-code">maxProfit = 0</span>
                    <span class="code-reserved-word">if</span> decisionFlag == 1:
                    <span class="code-remain-code"><span class="comment-code">    # as similar to take and notTake Concepts</span>
                        <span class="code-remain-code">buyTheStock = -prices[index] + dp[index + 1][0][transactionLimit]
                        notBuyTheStock = 0 + dp[index + 1][1][transactionLimit]
                        maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)
                    </span>

                    <span class="code-reserved-word">else:</span>
                        <span class="code-remain-code">shellTheStock = prices[index] + dp[index + 1][1][transactionLimit-1]
                        notSellTheStock = 0 + dp[index + 1][0][transactionLimit]
                        maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                    </span>

                    <span class="code-remain-code">dp[index][decisionFlag][transactionLimit] = maxProfit</span>

        <span class="comment-code"># we can also return maxProfit its also give the correct answer</span>
        <span class="code-reserved-word">print</span>(dp)
        <span class="code-reserved-word">return</span> dp[0][1][2]

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-remain-code">transactionLimit = 2</span>
        <span class="code-remain-code">dp = [[[0 <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(transactionLimit+1)] <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2)] <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n+1)]</span>
        
        <span class="code-reserved-word">print</span>(dp)
        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">TabulationApproch</span>(prices,n,dp)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>

                                   
                                </div>

                                <br>

                                <h3>Time & Space Complexity</h3>
                                <b>Time Complexity: O(N*2*3)</b> <br>

                                Reason: There are three nested loops that account for O(N*2*3) complexity.<br>

                                <b>Space Complexity: O(N*2*3)</b> <br>

                                Reason: We are using an external array of size ‘N*2*3’. Stack Space is
                                eliminated.<br><br>

                                <h3>Space Optimization</h3>

                                <p>
                                    If we closelly Observed <b>if any
                                        Tabulation Approch we used the Some
                                        Limited Stuff like: dp[ind][buy][cap] = max(dp[ind+1][buy][cap] , max(
                                        dp[ind+1][!buy][cap])) </b> for the finding
                                    the our ans then definetly here
                                    <b>Spaced Optimization</b> is Possible
                                    in that types of Problems. <b>Always
                                        Remember</b>
                                </p>

                                <b>Golden Rule</b>
                                <li>If we required only Prev row and Prev
                                    Collom then definetly we can Space
                                    Optimized</li>

                                <p>

                                    <li>We see that to calculate a value of a cell of the dp array, we need only the
                                        next column values(say ahead). So, we don’t need to store an entire 2-D array.
                                        Hence we can space optimize it.</li> <br>

                                    <img src="./Notes/L36spImg1.jpg" alt=""> <br>

                                    <li>We take two rows ‘prev’ and ‘cur’</li>
                                    <br>
                                    <li>We set a 2D vector ahead initialized to 0 (base condition) and another 2D</li>
                                    <br>
                                    <li>Then we set three nested loops to calculate the cur array’s values.</li><br>
                                    <li>We replace dp[ind] with cur and dp[ind+1] with ahead in our tabulation code.
                                    </li> <br>
                                    <li>After the inner loop execution, we set ahead as cur for the next outer loop
                                        iteration.</li> <br>
                                    <li>At last, we return prev[1][2] as our answer.</li>
                                </p>

                                <b>Some Important Points:</b><br>
                                <li>prev = curr: Some Time not working and
                                    not give a Correct answer, same like we
                                    face in this Problem due to the <b>Dynamic
                                        element Allocation</b></li>
                                <li>So we try at the place of the <b>prev =
                                        curr</b>
                                <li><b>prev[:] = curr</b></li>
                                <li><b>prev = curr[:]</b></li>
                                </li>

                                <br>
                                <div class="container">
                                    <div class="item">
                                        <div class="title"><b>SpaceOptmized
                                                Python Code</b></div>
                                           <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def SpaceOptimizationApproch</span>(<span class="code-class-name">self</span>, prices,n,prev,curr):

        <span class="comment-code"># Base Case
        # if index == n
        </span>
        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2):
            <span class="code-reserved-word">for</span> currdecisionFlag <span class="code-class-name">in</span> <span class="code-function-name">range</span>(3):
                <span class="code-remain-code">prev[0][currdecisionFlag] = 0</span>


        <span class="comment-code"># if transactionLimit == 0</span>
        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n):
            <span class="code-reserved-word">for</span> currdecisionFlag <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2):
                <span class="code-remain-code">prev[currdecisionFlag][0] = 0</span>

        <span class="code-reserved-word">print</span>(prev)
        <span class="code-reserved-word">print</span>(curr)

        <span class="comment-code"># Important Note: We All Ready in our DP inilisezed with the 0, no need to write the Base
        # Case allready all 0, But we Write the Base Case for the Understanding the Tabulation</span>

        <span class="code-reserved-word">for</span> indx <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n-1,-1,-1):
            <span class="code-reserved-word">for</span> decisionFlag <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2):
                <span class="code-reserved-word">for</span> transactionLimit <span class="code-class-name">in</span> <span class="code-function-name">range</span>(1,3):

                    <span class="code-remain-code">maxProfit = 0</span>
                    <span class="code-reserved-word">if</span> decisionFlag == 1:
                        <span class="code-remain-code"><span class="comment-code"># as similar to take and notTake Concepts</span>
                        <span class="code-remain-code">buyTheStock = -prices[indx] + prev[0][transactionLimit]
                        notBuyTheStock = 0 + prev[1][transactionLimit]
                        maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)
                        </span>

                    <span class="code-reserved-word">else:</span>
                        <span class="code-remain-code">shellTheStock = prices[indx] + prev[1][transactionLimit-1]
                        notSellTheStock = 0 + prev[0][transactionLimit]
                        maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                        </span>

                    <span class="code-remain-code">curr[decisionFlag][transactionLimit] = maxProfit</span>
                
                <span class="code-remain-code">prev = curr</span>

        <span class="comment-code"># we can also return maxProfit its also give the correct answer</span>
        <span class="code-reserved-word">return</span> prev[1][2]

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>

        <span class="code-remain-code">prev = [[0  <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(3)]  <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2)]</span>
        <span class="code-remain-code">curr = [[0  <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(3)]  <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(2)]</span>

        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">SpaceOptimizationApproch</span>(prices,n,prev,curr)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <br>

                                <h3>Time & Space Complexity</h3>
                                <b>Time Complexity: O(N*2)</b> <br>

                                Reason: There are two nested loops that account for O(N*2) complexity<br>

                                <b>Space Complexity: O(1)</b> <br>

                                Reason: We are using an external array of size ‘2’.<br><br>

                                <h3>Most Space Optimization</h3>
                                <p>If we observe very carefully, then its Possible to Optimized our Space frpm <b>3D
                                        DP</b> to <b>(N*4) DP</b> Memoization, Tabulation and Space Optimized Possible
                                    ley's Understand How ?</p>

                                <p><b>What is N * 4 DP Solution </b> <br>
                                    In our Solution what we do <b>fun(cap,transcationLimit)</b> if transcationLimit == 0
                                    then we formed our Solution that we Discuss <br><br>

                                    <b>So This Approch is the Completely Observation Based Approch</b> <br>
                                    We know that we have the 2 transcationLimit that means <b>4 Options</b> <br>

                                <pre>
    Buy  Shell  Buy  Shell
     0     1     2     3
</pre> <br>

                                So here we Observed very Carefully our buy transcation will only then <b>index % 2 == 0
                                    (even)</b> otherwise shell
                                </p>

                                <p>That is the Core Concept that we used to Convert the our <B>3D DP Solution into the
                                        2D DP Solution</B> in All the Formate Memoization, Tabulation and Space
                                    Optimized</p>

                                <div class="container">
                                    <div class="item">
                                        <div class="title"><b>Recursion Optmized
                                                Python Code</b></div>
                                         <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def RecursionApproch</span>(<span class="code-class-name">self</span>, prices,index,n,transactionLimit):
        
        <span class="comment-code"># Base Case</span>    
        <span class="code-reserved-word">if</span> index == n <span class="code-reserved-word">or</span> transactionLimit == 4:
            <span class="code-reserved-word">return</span> 0
                
        <span class="code-remain-code">maxProfit = 0</span>
                
        <span class="code-reserved-word">if</span> transactionLimit % 2 == 0:
        <span class="code-remain-code"><span class="comment-code">    # as similar to take and notTake Concepts</span>
            buyTheStock = -prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices,index+1,n,transactionLimit+1)
            notBuyTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices,index+1,n,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)</span>
           
        <span class="code-reserved-word">else:</span>
        <span class="code-remain-code">    shellTheStock = prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices, index + 1, n ,transactionLimit+1)
            notSellTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices, index + 1, n ,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                    </span>
        <span class="code-reserved-word">return</span> maxProfit

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-remain-code">transactionLimit = 0</span>
        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">RecursionApproch</span>(prices,0,n,transactionLimit)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="item">
                                        <div class="title"><b>Memoization Optmized
                                                Python Code</b></div>

                                                 <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def MemoizationApproch</span>(<span class="code-class-name">self</span>, prices, index, n, dp, transactionLimit):

        <span class="comment-code"># Base Case</span>
        <span class="code-reserved-word">if</span> index == n <span class="code-reserved-word">or</span> transactionLimit == 4:
            <span class="code-reserved-word">return</span> 0
                
        <span class="code-remain-code"><span class="code-reserved-word">if</span> dp[index][transactionLimit] != -1:
            <span class="code-reserved-word">return</span> dp[index][transactionLimit]</span>

        <span class="code-remain-code">maxProfit = 0</span>
                
        <span class="code-reserved-word">if</span> transactionLimit % 2 == 0:
        <span class="code-remain-code"><span class="comment-code">    # as similar to take and notTake Concepts</span>
            buyTheStock = -prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices,index+1,n,dp,transactionLimit+1)
            notBuyTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices,index+1,n,dp,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)</span>
           
        <span class="code-reserved-word">else:</span>
        <span class="code-remain-code">    shellTheStock = prices[index] + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices, index + 1, n ,dp,transactionLimit+1)
            notSellTheStock = 0 + <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices, index + 1, n ,dp,transactionLimit)
            maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                    </span>
        <span class="code-remain-code">dp[index][transactionLimit] = maxProfit</span>
        <span class="comment-code"># we can also return maxProfit its also give the correct answer</span>
        <span class="code-reserved-word">return</span> dp[index][transactionLimit]

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-remain-code">transactionLimit = 0</span>

        <span class="code-remain-code">dp = [[-1 <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(4)] <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n)]</span>
   
        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">MemoizationApproch</span>(prices, 0, n, dp, transactionLimit)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                       
                                    </div>

                                    <div class="item">
                                        <div class="title"><b>Tabulation Optmized
                                                Python Code</b></div>
                                          <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def TabulationApproch</span>(<span class="code-class-name">self</span>, prices,n,dp):
        
        <span class="comment-code"># Base Case
        # if index == n
        </span>
        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(5):
            <span class="code-remain-code">dp[n][index] = 0</span>


        <span class="comment-code"># if transactionLimit == 0</span>
        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n+1):
            <span class="code-remain-code">dp[index][4]= 0</span>

        <span class="code-reserved-word">print</span>(dp)

        <span class="comment-code"># Important Note: We All Ready in our DP inilisezed with the 0, no need to write the Base
        # Case allready all 0, But we Write the Base Case for the Understanding the Tabulation</span>

        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n-1,-1,-1):
            <span class="code-reserved-word">for</span> transactionLimit <span class="code-class-name">in</span> <span class="code-function-name">range</span>(3,-1,-1):
                
                <span class="code-remain-code">maxProfit = 0</span>
                <span class="code-reserved-word">if</span> transactionLimit % 2 == 0:
                <span class="code-remain-code"><span class="comment-code">    # as similar to take and notTake Concepts</span>
                    <span class="code-remain-code">buyTheStock = -prices[index] + dp[index + 1][transactionLimit+1]
                    notBuyTheStock = 0 + dp[index + 1][transactionLimit]
                    maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)
                </span>

                <span class="code-reserved-word">else:</span>
                    <span class="code-remain-code">shellTheStock = prices[index] + dp[index + 1][transactionLimit+1]
                    notSellTheStock = 0 + dp[index + 1][transactionLimit]
                    maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                </span>

                <span class="code-remain-code">dp[index][transactionLimit] = maxProfit</span>

        <span class="comment-code"># we can also return maxProfit its also give the correct answer</span>
        <span class="code-reserved-word">print</span>(dp)
        <span class="code-reserved-word">return</span> dp[0][0]

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-remain-code">transactionLimit = 0</span>

        <span class="code-remain-code">dp = [[0 <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(5)] <span class="code-reserved-word">for</span> _ <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n+1)]</span>
        
        <span class="code-reserved-word">print</span>(dp)
        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">TabulationApproch</span>(prices,n,dp)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="item">
                                        <div class="title"><b>SpaceOptimized Optmized
                                                Python Code</b></div>
                                         <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def SpaceOptimizationApproch</span>(<span class="code-class-name">self</span>, prices,n,prev,curr):

        <span class="comment-code"># Base Case
        # if index == n
        </span>
        <span class="code-reserved-word">for</span> index <span class="code-class-name">in</span> <span class="code-function-name">range</span>(5):
            <span class="code-remain-code">prev[index] = 0</span>

        <span class="comment-code"># if transactionLimit == 0</span>
        <span class="code-remain-code">curr[4] = 0</span>

        <span class="code-reserved-word">print</span>(prev)
        <span class="code-reserved-word">print</span>(curr)

        <span class="comment-code"># Important Note: We All Ready in our DP inilisezed with the 0, no need to write the Base
        # Case allready all 0, But we Write the Base Case for the Understanding the Tabulation</span>

        <span class="code-reserved-word">for</span> indx <span class="code-class-name">in</span> <span class="code-function-name">range</span>(n-1,-1,-1):
            <span class="code-reserved-word">for</span> transactionLimit <span class="code-class-name">in</span> <span class="code-function-name">range</span>(3,-1,-1):
                
                <span class="code-remain-code">maxProfit = 0</span>
                <span class="code-reserved-word">if</span> transactionLimit % 2 == 0:
                    <span class="code-remain-code"><span class="comment-code"># as similar to take and notTake Concepts</span>
                    <span class="code-remain-code">buyTheStock = -prices[indx] + prev[transactionLimit+1]
                    notBuyTheStock = 0 + prev[transactionLimit]
                    maxProfit = <span class="code-reserved-word">max</span>(buyTheStock,notBuyTheStock)
                    </span>

                <span class="code-reserved-word">else:</span>
                    <span class="code-remain-code">shellTheStock = prices[indx] + prev[transactionLimit+1]
                    notSellTheStock = 0 + prev[transactionLimit]
                    maxProfit = <span class="code-reserved-word">max</span>(shellTheStock, notSellTheStock)
                    </span>
                <span class="code-remain-code">curr[transactionLimit] = maxProfit</span>
                
            <span class="code-remain-code">prev = curr</span>

        <span class="comment-code"># we can also return maxProfit its also give the correct answer</span>
        <span class="code-reserved-word">return</span> prev[0]

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-remain-code">transactionLimit = 0
        prev = [0]*5
        curr = [0]*5
        </span>

        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">SpaceOptimizationApproch</span>(prices,n,prev,curr)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>

                                    
                                </div>

                                <br>
                                <h3>Time & Space Complexity</h3>
                                <b>Time Complexity: O(N*2)</b> <br>

                                Reason: There are two nested loops that account for O(N*2) complexity<br>

                                <b>Space Complexity: O(5)</b> <br>

                                Reason: We are using just Size of 5(len) DP 1D Array prev and curr.<br><br>

                                <h3>Most Space Optimization Using 4 Variables</h3>
                                <p>
                                    This Approch is a popular approach on platforms like <b>LeetCode</b> however, it often lacks a clear intuition behind the logic. <b>Recruiters</b> may not be satisfied with solutions that utilize <b>four variables</b> without a valid and authenticated rationale. Therefore, it is advisable not to present this approach in interviews. Nevertheless, I have included this solution for the purpose of understanding and learning.
                                </p>


                                <div class="container">
                                    <div class="item">
                                        <div class="title"><b>SpaceOptmized
                                                Python Code</b></div>
                                           <div class="content">
                                            <div class="code-container">
                                                <pre>
<span class="code-class-name">class</span> Solution:
        
    <span class="code-function-name">def MostSpaceOptimizationApproch</span>(<span class="code-class-name">self</span>, prices, n):

        <span class="code-remain-code"><span class="code-reserved-word">if</span> <span class="code-function-name">not</span> prices:
            <span class="code-reserved-word">return</span> 0</span>
        
        <span class="code-remain-code">A = -prices[0]
        B = float('-inf')
        C = float('-inf')
        D = float('-inf')</span>

        <span class="code-reserved-word">for</span> price <span class="code-class-name">in</span> prices:
            <span class="code-remain-code">A = <span class="code-reserved-word">max</span>(A, -price)
            B = <span class="code-reserved-word">max</span>(B, A + price)
            C = <span class="code-reserved-word">max</span>(C, B - price)
            D = <span class="code-reserved-word">max</span>(D, C + price)
            </span>
        <span class="code-reserved-word">return</span> D

    <span class="code-function-name">def maxProfit</span>(<span class="code-class-name">self</span>, prices):
                 
        <span class="code-remain-code">n = <span class="code-reserved-word">len</span>(prices)</span>
        <span class="code-reserved-word">return</span> <span class="code-class-name">self</span>.<span class="code-function-name">MostSpaceOptimizationApproch</span>(prices, n)

<span class="code-remain-code">ans = <span class="code-class-name">Solution()</span></span>
<span class="code-remain-code">prices = [3,3,5,0,0,3,1,4]</span>
<span class="code-remain-code"><span class="code-reserved-word">print</span>(ans.<span class="code-function-name">maxProfit(prices)</span>)</span>
        </pre>
                                            </div>
                                        </div>
                                    </div>

                                </div>


                                <br>
                                <h3>Time & Space Complexity</h3>
                                <b>Time Complexity: O(N)</b> <br>

                                Reason: There are two nested loops that account for O(N*2) complexity<br>

                                <b>Space Complexity: O(4)</b> <br>

                                Reason: We are using just used 4 Variable.
                                <br><br>



                                <!-- codeEditor  -->
                                <div class="QuestionmeraInterviewCodeEditior">
                                    <div class="textEditorMainDiv">
                                        <div class="toolbar">
                                            <div class="head">
                                                <input type="text" placeholder="Filename" value="File Name"
                                                    id="filename">
                                                <select onchange="fileHandle(this.value); this.selectedIndex=0">
                                                    <option value selected hidden disabled>File</option>
                                                    <option value="new">New
                                                        file</option>
                                                    <option value="txt">Save
                                                        as txt</option>
                                                    <option value="pdf">Save
                                                        as pdf</option>
                                                </select>
                                                <select
                                                    onchange="formatDoc('formatBlock', this.value); this.selectedIndex=0;">
                                                    <option value selected hidden disabled>Format</option>
                                                    <option value="h1">Heading
                                                        1</option>
                                                    <option value="h2">Heading
                                                        2</option>
                                                    <option value="h3">Heading
                                                        3</option>
                                                    <option value="h4">Heading
                                                        4</option>
                                                    <option value="h5">Heading
                                                        5</option>
                                                    <option value="h6">Heading
                                                        6</option>
                                                    <option value="p">Paragraph</option>
                                                </select>
                                                <select
                                                    onchange="formatDoc('fontSize', this.value); this.selectedIndex=0;">
                                                    <option value selected hidden disabled>Font
                                                        size</option>
                                                    <option value="1">Extra
                                                        small</option>
                                                    <option value="2">Small</option>
                                                    <option value="3">Regular</option>
                                                    <option value="4">Medium</option>
                                                    <option value="5">Large</option>
                                                    <option value="6">Extra
                                                        Large</option>
                                                    <option value="7">Big</option>
                                                </select>
                                                <div class="color">
                                                    <span>Color</span>
                                                    <input type="color"
                                                        oninput="formatDoc('foreColor', this.value); this.value='#000000';">
                                                </div>
                                                <div class="color">
                                                    <span>Background</span>
                                                    <input type="color"
                                                        oninput="formatDoc('hiliteColor', this.value); this.value='#000000';">
                                                </div>
                                            </div>
                                            <div class="btn-toolbar">
                                                <button onclick="formatDoc('undo')"><i class='bx bx-undo'></i></button>
                                                <button onclick="formatDoc('redo')"><i class='bx bx-redo'></i></button>
                                                <button onclick="formatDoc('bold')"><i class='bx bx-bold'></i></button>
                                                <button onclick="formatDoc('underline')"><i
                                                        class='bx bx-underline'></i></button>
                                                <button onclick="formatDoc('italic')"><i
                                                        class='bx bx-italic'></i></button>
                                                <button onclick="formatDoc('strikeThrough')"><i
                                                        class='bx bx-strikethrough'></i></button>
                                                <button onclick="formatDoc('justifyLeft')"><i
                                                        class='bx bx-align-left'></i></button>
                                                <button onclick="formatDoc('justifyCenter')"><i
                                                        class='bx bx-align-middle'></i></button>
                                                <button onclick="formatDoc('justifyRight')"><i
                                                        class='bx bx-align-right'></i></button>
                                                <button onclick="formatDoc('justifyFull')"><i
                                                        class='bx bx-align-justify'></i></button>
                                                <button onclick="formatDoc('insertOrderedList')"><i
                                                        class='bx bx-list-ol'></i></button>
                                                <button onclick="formatDoc('insertUnorderedList')"><i
                                                        class='bx bx-list-ul'></i></button>
                                                <button onclick="addLink()"><i class='bx bx-link'></i></button>
                                                <button onclick="formatDoc('unlink')"><i
                                                        class='bx bx-unlink'></i></button>
                                                <button id="show-code" data-active="false">&lt;/&gt;</button>
                                            </div>
                                        </div>
                                        <div id="content" contenteditable="true" spellcheck="false">
                                            <b>Interview Docs File
                                                "All the Best" Team
                                                @DSAwithPrinceSingh</b>
                                        </div>
                                    </div>
                                    <script src="../codeEditor.js"></script>
                                </div>

                            </div>
                            <br>

                            <center>~ It's All About Consistency📈
                                Dedication🎯 HardWork💪 Happy Coding❤️ ~</center>
                        </div>
                    </div>
                </div>
            </article>
            <!-- #post-## -->
        </main>

        <!-- #main -->
    </div>
    <script src="../script.js"></script>

</body>

</html>